# **Use Cases для проекта A4 — Auto Import Catalog**

---

## **Use Case 1 — Импорт каталога поставщика**

**Актор:** Поставщик / Менеджер по закупкам  
**Описание:** Пользователь загружает файл каталога (CSV, XLSX, XML, API-фид). Система анализирует структуру, определяет формат, валидирует и загружает данные.  
**Предусловия:**  
- Пользователь авторизован.  
- Файл каталога доступен.

**Основной поток:**  
1. Пользователь выбирает функцию “Импорт каталога”.  
2. Загружает файл или указывает ссылку на API.  
3. Система определяет формат.  
4. Выполняет валидацию полей.  
5. Показывает пользователю предварительные результаты анализа.  
6. Пользователь подтверждает импорт.  
7. Система записывает данные в хранилище и формирует отчёт.

**Альтернативный поток:**  
- Файл повреждён → система сообщает об ошибке.  
- Формат неизвестен → система предлагает задать структуру вручную.  
- Данные частично отсутствуют → частичный импорт с предупреждением.

**Постусловия:**  
- Каталог поставщика загружен.  
- Создан отчёт о качестве данных.

---

## **Use Case 2 — Автоматическое обновление каталога (парсинг)**

**Актор:** Система (планировщик)  
**Описание:** Система автоматически получает и обновляет данные поставщиков через API, парсинг сайтов или расписанные файлы.  
**Предусловия:**  
- Источники данных настроены.

**Основной поток:**  
1. Планировщик запускает обновление.  
2. Система получает новые данные.  
3. Валидирует, сравнивает с текущими.  
4. Обновляет цены, остатки, описания.  
5. Формирует отчёт.

**Альтернативный поток:**  
- Источник недоступен → повторная попытка.  
- Структура изменилась → уведомление администратору.

**Постусловия:**  
- Данные обновлены и сохранены.

---

## **Use Case 3 — Поиск автозапчастей по VIN или артикулу**

**Актор:** Клиент / Мастерская / Автолюбитель  
**Описание:** Пользователь вводит VIN или артикул, система подбирает подходящие запчасти из нескольких поставщиков.  
**Предусловия:**  
- Каталоги загружены.

**Основной поток:**  
1. Пользователь вводит VIN/артикул.  
2. Система определяет формат данных.  
3. Выполняет поиск по базе.  
4. Производит кросс-референс и нормализацию.  
5. Показывает релевантные варианты.

**Альтернативный поток:**  
- VIN некорректный → ошибка.  
- Ничего не найдено → предложение расширенного поиска.

**Постусловия:**  
- Пользователь получил список подходящих запчастей.

---

## **Use Case 4 — Сравнение предложений разных поставщиков**

**Актор:** Клиент / Менеджер по закупкам  
**Описание:** Пользователь сравнивает предложения: цены, остатки, сроки доставки, рейтинги поставщиков.  
**Предусловия:**  
- Найдены товары по запросу.

**Основной поток:**  
1. Пользователь выбирает несколько предложений.  
2. Система собирает параметры.  
3. Формирует сравнительную таблицу.  
4. Предлагает оптимальный вариант.

**Альтернативный поток:**  
- Недостаточно данных → система помечает отсутствующие параметры.

**Постусловия:**  
- Сформирована сравнительная таблица.

---

## **Use Case 5 — Формирование коммерческого предложения (КП)**

**Актор:** Менеджер по закупкам  
**Описание:** На основе выбранных товаров формируется КП в PDF/Excel формате.  
**Предусловия:**  
- Пользователь авторизован.  
- Есть товары для КП.

**Основной поток:**  
1. Пользователь добавляет товары в список.  
2. Выбирает клиента.  
3. Система рекомендует лучшие позиции.  
4. Формирует документ КП.  
5. Пользователь скачивает или отправляет клиенту.

**Альтернативный поток:**  
- Клиент отсутствует → создаётся новый.

**Постусловия:**  
- КП сохранено и доступно для скачивания.

---

## **Use Case 6 — Управление поставщиками**

**Актор:** Администратор  
**Описание:** Администратор добавляет поставщиков, редактирует настройки API, расписания обновлений.  
**Предусловия:**  
- Администратор авторизован.

**Основной поток:**  
1. Открывает раздел поставщиков.  
2. Добавляет нового или редактирует параметры существующего.  
3. Настраивает API, расписание, форматы файлов.  
4. Сохраняет изменения.

**Альтернативный поток:**  
- Неверные данные → система сообщает об ошибке.

**Постусловия:**  
- Данные поставщиков обновлены.

---

## **Use Case 7 — Настройка правил ценообразования**

**Актор:** Менеджер  
**Описание:** Менеджер задаёт надбавки, скидки, коэффициенты, округления для разных категорий клиентов.  
**Предусловия:**  
- Клиенты и товары существуют.

**Основной поток:**  
1. Пользователь открывает раздел “Правила”.  
2. Выбирает тип клиента.  
3. Добавляет надбавки и коэффициенты.  
4. Система пересчитывает цены.  
5. Пользователь подтверждает.

**Альтернативный поток:**  
- Некорректные параметры → предупреждение.

**Постусловия:**  
- Правила применены.

---

## **Use Case 8 — Просмотр журнала изменений и ошибок**

**Актор:** Администратор  
**Описание:** Администратор просматривает логи импорта, обновлений, ошибок источников.  
**Предусловия:**  
- Логи существуют.

**Основной поток:**  
1. Пользователь открывает журнал.  
2. Фильтрует по времени/поставщику/типу событий.  
3. Просматривает записи.

**Альтернативный поток:**  
- Нет записей → пустой журнал.

**Постусловия:**  
- Администратор получил доступ к истории операций.

---

## **Use Case 9 — Уведомления о событиях**

**Актор:** Администратор / Менеджер / Поставщик  
**Описание:** Система отправляет уведомления о критичных событиях: ошибки импорта, изменения цен, сбои API.  
**Предусловия:**  
- Настроены каналы уведомлений.

**Основной поток:**  
1. Система обнаруживает событие.  
2. Определяет тип получателя.  
3. Отправляет уведомление (email, Telegram, web).  
4. Пользователь просматривает уведомление.

**Альтернативный поток:**  
- Канал недоступен → используется резервный.

**Постусловия:**  
- Информация о событии доставлена.

---

## **Use Case 10 — Управление правами доступа**

**Актор:** Администратор  
**Описание:** Управление ролями: администратор, менеджер, клиент, поставщик.  
**Предусловия:**  
- Администратор авторизован.

**Основной поток:**  
1. Открывает раздел “Права доступа”.  
2. Создаёт или обновляет роль.  
3. Настраивает разрешения.  
4. Сохраняет.

**Альтернативный поток:**  
- Попытка удалить роль, используемую пользователями → предупреждение.

**Постусловия:**  
- Обновлённая модель прав доступа вступила в силу.

---
